AI智能体驱动交易系统 - 14模组详细功能清单
第一部分：基础服务层 (The Foundation)
模组一：API统一管理工厂 (APIForge)

核心职责: 系统的“外交与安保部”，作为统一的对外网关，负责管理所有对外部第三方API的调用。

详细功能:

API网关: 路由所有出站请求到正确的外部服务集群（交易所、大语言模型、数据源等）。

认证中心: 集中、安全地管理所有外部服务的API Key/Secret，并为请求自动添加认证信息。

配额与熔断: 控制对外部API的调用频率，防止超出速率限制；在某个外部API失效时，能快速熔断，并可切换到备用API。

状态通知: 当某个外部API连接状态发生变化（如连接失败或恢复）时，通过ZeroMQ的apiforge.events.status主题向系统内部广播通知。

(V2.0)自托管AI模型路由: 升级后，将直接内置对多个大语言模型（如DeepSeek, Gemini）的调用逻辑，并根据请求参数智能路由。

模组十二：TACoreService (交易代理核心服务)

核心职责: 系统的唯一“AI核心引擎”，将TradingAgents-CN库的核心交易算法服务化，为其他模组提供统一、高性能的AI交易能力。

详细功能:

市场扫描服务 (scan.market): 提供一个ZeroMQ服务接口，用于执行市场扫描任务，发现潜在的交易机会。

订单执行服务 (execute.order): 提供一个ZeroMQ服务接口，用于执行交易订单，支持市价、限价等多种订单类型。

风险评估服务 (evaluate.risk): 提供一个ZeroMQ服务接口，用于对拟执行的交易进行量化风险评估。

负载均衡与水平扩展: 采用ZeroMQ的ROUTER/DEALER模式，能够将请求自动分发到多个并行的工作进程（Worker）上，并支持通过增加Worker容器的数量来线性提升整个服务的处理能力。

第二部分：数据与信息层 (Data & Information Layer)
模组二：信息源爬虫 (DataSpider)

核心职责: 系统的“情报搜集员”，负责从各种没有标准API的渠道（如新闻网站、社交媒体）抓取关键信息。

详细功能:

网站爬虫: 具备抓取指定网站（如SEC官网）HTML内容的能力。

Telegram监听: 能够实时监控指定的Telegram频道，获取上币、预警等信息。

数据清洗与格式化: 将抓取到的非结构化数据，转换为我们系统统一的、干净的JSON格式。

数据分发: 通过ZeroMQ的crawler.news主题，将处理好的情报数据向全系统广播。

模组三：扫描器 (ScanPulse)

核心职责: 系统的“雷达站”，7x24小时不间断地扫描市场，是所有交易机会的发现起点。

详细功能:

常规扫描: 基于“三高”（高波动、高流动、高相关）等预设规则，进行周期性的市场扫描。

黑马监测器: 订阅【信息源爬虫】的crawler.news主题，实时捕捉突发新闻（如上币公告），并立即触发专项扫描。

潜力挖掘: 具备挖掘低单价、低市值、低关注度的“潜力币”的能力。

机会发布: 将所有发现的、符合初步筛选规则的交易机会，通过ZeroMQ的scanner.pool.preliminary主题发布出去，供下游模组分析。

第三部分：决策与执行层 (Decision & Execution Layer)
模组四：策略优化 (OptiCore)

核心职责: 系统的“军事参谋部”，负责对扫描器发现的机会进行严格的回测验证和参数优化。

详细功能:

压力测试沙盒: 使用历史数据，特别是已知的崩盘数据，对策略进行72小时的模拟交易，以检验其在极端行情下的表现。

参数优化: 使用遗传算法等方式，自动为策略寻找最优的参数组合。

决策引擎: 根据最大回撤、夏普比率、滑点成本等核心指标，自动对回测通过的策略进行审批或拒绝。

参数包发布: 将最终通过审批的、稳健可靠的“策略参数包”，通过ZeroMQ的optimizer.pool.trading主题发布出去，供【人工审核模组】接收。

模组十：人工审核 (ReviewGuard)

核心职责: 系统的“智能安全阀”，位于自动化流程与人类智慧之间，为系统增加一层关键的人工监督和风险控制。

详细功能:

策略接收: 订阅optimizer.pool.trading主题，接收所有来自【策略优化模组】的策略包。

规则引擎: 内置一套自动审核规则，可以根据策略的风险等级、仓位大小等，自动执行“批准”、“拒绝”或“转为人工审核”。

人工审核接口: 提供HTTP API（如GET /reviews/pending, POST /reviews/{id}/decision），供【前端管理界面】调用，以展示待审列表和提交人工审核决策。

指令放行: 将所有经过（自动或人工）审核通过的交易指令，通过ZeroMQ的review.pool.approved主题发布出去，交由【交易员模组】执行。

模组五、六、七：交易执行铁三角 (TradeGuard)

核心职责: 由“交易员”、“风控”、“财务”三个逻辑单元紧密协作，完成从交易审批到执行的完整流程。

详细功能:

交易员 (Trader): 订阅review.pool.approved主题接收指令；通过ZMQ向【风控】和【财务】发起评估和预算申请；最终调用【TACoreService】的execute.order服务执行下单。

风控 (Risk Control): 响应【交易员】的评估请求，返回量化风险评分；实时监控市场异动，并在发现重大风险时，向risk.alerts主题发布警报。

财务 (Finance): 响应【交易员】的预算申请，根据风险评分和账户状况，动态地批准资金额度。

第四部分：全局指挥与支撑层 (Global Command & Support Layer)
模组八：总控 (NeuroHub)

核心职责: 整个系统的“总司令”，不参与具体交易，而是通过监控全局状态，做出最高级别的战略决策。

详细功能:

战场仪表盘: 监控牛熊指数、市场杠杆率等宏观指标。

模式切换: 根据市场状态（牛/熊/震荡），通过control.commands主题发布全局指令，要求所有策略切换到“进攻”、“防御”或“标准”模式。

熔断协议: 订阅risk.alerts主题，在接收到最高级别的“黑天鹅”警报时，立即发布EMERGENCY_SHUTDOWN（紧急熔断）指令，要求【交易员】清空所有仓位。

记忆网络: 存储历史重大事件（如LUNA崩盘）的处置方案，用于未来决策参考。

模组九：市场微结构仿真引擎 (MMS)

核心职责: 系统的“虚拟现实”引擎，作为一个高级服务，为策略优化提供比传统回测更高保真的仿真环境。

详细功能:

参数化市场建模: 能够对滑点、成交概率、价格冲击等市场微观结构进行参数化建模。

自适应校准: 利用实盘交易数据，自动校准和优化仿真模型的参数。

极端场景沙盒: 内置多种历史极端行情（如“519闪崩”），供策略进行压力测试。

仿真服务 (/simulate): 提供一个HTTP/gRPC接口，供【策略优化模组】调用，以评估策略在特定仿真场景下的表现。

模组十一：前端管理界面 (ASTS Console)

核心职责: 系统的唯一、统一用户交互界面，是一个集“实时战情室”、“AI参谋部”、“策略实验室”和“总指挥台”于一体的综合性平台。

详细功能:

仪表盘: 实时展示系统最重要的状态和核心指标。

人工审核中心: 与【人工审核模组】交互，处理待审交易。

AI策略实验室: 与【AI策略研究助理】进行自然语言交互。

高级交易复盘: 集成专业K线图，用于历史交易分析。

系统监控中心: 内嵌展示来自【可观测性中心】的Grafana监控仪表盘。

风控演习中心: 配置并启动由【MMS】驱动的风控演习。

API成本中心: 实时展示API调用成本和设置预算告警。

模块管理: 查看和管理其他后台模组的配置和状态。

模组十三：AI策略研究助理 (AI Strategy Assistant)

核心职责: 系统的“创意大脑”，利用大语言模型（LLM）的能力，辅助人类创造和迭代策略。

详细功能:

市场情绪分析: 自动抓取并分析社媒、新闻数据，生成市场情绪指数。

宏观事件解读: 自动调用LLM，对重大宏观事件生成解读和潜在影响分析。

策略灵感生成: 允许用户通过自然语言提问，调用LLM生成潜在的交易思路或策略因子。

策略代码辅助: 在前端策略编辑器中，为用户提供AI代码补全和优化建议。

模组十四：系统可观测性中心 (Observability Center)

核心职责: 为整个微服务集群安装上“行车记录仪”和“健康监视器”，确保任何问题都能被快速发现和定位。

详细功能:

集中式日志管理: 所有模组的日志被统一收集到Loki，可在Grafana中进行搜索、筛选和告警。

核心指标监控: 在Grafana中为每个模组建立核心性能指标（如QPS, 延迟, 内存使用率）的监控仪表盘，数据源为Prometheus。

分布式链路追踪: 使用Tempo和OpenTelemetry，追踪一笔请求在多个模组之间的完整调用链。

智能告警: 当关键指标超出阈值时，通过邮件、Telegram等渠道自动发送告警。