# äº¤æ˜“æ‰§è¡Œé“ä¸‰è§’ (TradeGuard)

ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„çš„åˆ†å¸ƒå¼é‡åŒ–äº¤æ˜“æ‰§è¡Œç³»ç»Ÿï¼Œç”±äº¤æ˜“å‘˜(Trader)ã€é£æ§(Risk Control)ã€è´¢åŠ¡(Finance)ä¸‰ä¸ªæ ¸å¿ƒæ¨¡ç»„æ„æˆã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒè®¾è®¡ç†å¿µ
- **åŒ–æ•´ä¸ºé›¶ï¼Œåˆ†è€Œæ²»ä¹‹**: å°†å¤æ‚äº¤æ˜“ç³»ç»Ÿæ‹†åˆ†ä¸º8ä¸ªç‹¬ç«‹æ¨¡ç»„
- **é«˜å†…èšï¼Œä½è€¦åˆ**: é€šè¿‡ZeroMQæ¶ˆæ¯æ€»çº¿å®ç°æ¨¡ç»„é—´é€šä¿¡
- **ä¸‰ç¯å¢ƒéš”ç¦»**: æ”¯æŒdevelopment/staging/productionç¯å¢ƒä¸¥æ ¼éš”ç¦»
- **é›¶é…ç½®éƒ¨ç½²**: åŸºäºDockerçš„ä¸€é”®éƒ¨ç½²æ–¹æ¡ˆ

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 18 + TypeScript + Tailwind CSS + Vite
- **åç«¯**: Node.js + Express + TypeScript
- **æ¶ˆæ¯é˜Ÿåˆ—**: ZeroMQ (PUB/SUB, REQ/REPæ¨¡å¼)
- **ç¼“å­˜**: Redis 7.0
- **æ•°æ®åº“**: SQLite (è½»é‡çº§ã€é›¶é…ç½®)
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **å›¾è¡¨**: Recharts
- **AIé›†æˆ**: TradingAgents-CN v3.0

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/                          # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ modules/                  # ä¸šåŠ¡æ¨¡ç»„
â”‚   â”‚   â”œâ”€â”€ trader/              # äº¤æ˜“å‘˜æ¨¡ç»„
â”‚   â”‚   â”œâ”€â”€ risk/                # é£æ§æ¨¡ç»„
â”‚   â”‚   â”œâ”€â”€ finance/             # è´¢åŠ¡æ¨¡ç»„
â”‚   â”‚   â””â”€â”€ master-control/      # æ€»æ§æ¨¡ç»„
â”‚   â”œâ”€â”€ shared/                  # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ services/            # æœåŠ¡å±‚
â”‚   â””â”€â”€ components/              # é€šç”¨ç»„ä»¶
â”œâ”€â”€ api/                         # åç«¯API
â”‚   â”œâ”€â”€ modules/                 # ä¸šåŠ¡æ¨¡ç»„API
â”‚   â”‚   â”œâ”€â”€ trader/              # äº¤æ˜“å‘˜API
â”‚   â”‚   â”œâ”€â”€ risk/                # é£æ§API
â”‚   â”‚   â”œâ”€â”€ finance/             # è´¢åŠ¡API
â”‚   â”‚   â””â”€â”€ master-control/      # æ€»æ§API
â”‚   â””â”€â”€ shared/                  # å…±äº«åç«¯ä»£ç 
â”‚       â”œâ”€â”€ database/            # æ•°æ®åº“é…ç½®
â”‚       â”œâ”€â”€ messaging/           # ZeroMQæ¶ˆæ¯å¤„ç†
â”‚       â””â”€â”€ middleware/          # ä¸­é—´ä»¶
â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ base.yaml               # åŸºç¡€é…ç½®
â”‚   â”œâ”€â”€ development.yaml        # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ staging.yaml            # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ production.yaml         # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ scripts/                     # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ .trae/documents/            # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ docker-compose.yml          # Dockerç¼–æ’é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- Redis 7.0+
- Docker & Docker Compose (å¯é€‰)

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–**
```bash
git clone <repository-url>
cd 05-07TradeGuard
npm install
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

3. **å¯åŠ¨RedisæœåŠ¡**
```bash
# ä½¿ç”¨Dockerå¯åŠ¨Redis
docker run -d --name redis -p 6379:6379 redis:7-alpine

# æˆ–ä½¿ç”¨æœ¬åœ°RedisæœåŠ¡
redis-server
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–åˆ†åˆ«å¯åŠ¨
npm run client:dev  # å‰ç«¯å¼€å‘æœåŠ¡å™¨ (http://localhost:5173)
npm run server:dev  # åç«¯APIæœåŠ¡å™¨ (http://localhost:3000)
```

### Dockeréƒ¨ç½²

1. **å¼€å‘ç¯å¢ƒ**
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f tradeguard-app
```

2. **ç”Ÿäº§ç¯å¢ƒ**
```bash
# åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®
cp .env.example .env.prod
# ç¼–è¾‘ .env.prod æ–‡ä»¶

# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
docker-compose --profile production up -d
```

3. **åŒ…å«ç›‘æ§çš„å®Œæ•´éƒ¨ç½²**
```bash
# å¯åŠ¨åŒ…å«Prometheuså’ŒGrafanaçš„å®Œæ•´ç›‘æ§æ ˆ
docker-compose --profile monitoring --profile production up -d
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ç¯å¢ƒç®¡ç†

ç³»ç»Ÿæ”¯æŒä¸‰ä¸ªç¯å¢ƒçš„ä¸¥æ ¼éš”ç¦»ï¼š

- **development**: å¼€å‘ç¯å¢ƒï¼Œæ”¯æŒçƒ­é‡è½½ã€è¯¦ç»†æ—¥å¿—ã€æ¨¡æ‹Ÿæ•°æ®
- **staging**: å‡†ç”Ÿäº§ç¯å¢ƒï¼Œç”¨äºé›†æˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•
- **production**: ç”Ÿäº§ç¯å¢ƒï¼Œä¼˜åŒ–æ€§èƒ½ã€å®‰å…¨åŠ å›ºã€ç›‘æ§å‘Šè­¦

é€šè¿‡ `APP_ENV` ç¯å¢ƒå˜é‡åˆ‡æ¢ï¼š
```bash
export APP_ENV=development  # æˆ– staging, production
```

### æ¨¡ç»„å¼€å‘

æ¯ä¸ªæ¨¡ç»„éƒ½éµå¾ªç›¸åŒçš„å¼€å‘æ¨¡å¼ï¼š

1. **å‰ç«¯æ¨¡ç»„** (`src/modules/{module}/`)
   - `components/`: Reactç»„ä»¶
   - `pages/`: é¡µé¢ç»„ä»¶
   - `hooks/`: è‡ªå®šä¹‰Hook
   - `services/`: APIæœåŠ¡
   - `types/`: æ¨¡ç»„ç‰¹å®šç±»å‹

2. **åç«¯æ¨¡ç»„** (`api/modules/{module}/`)
   - `routes/`: APIè·¯ç”±
   - `controllers/`: æ§åˆ¶å™¨
   - `services/`: ä¸šåŠ¡é€»è¾‘
   - `models/`: æ•°æ®æ¨¡å‹

### ZeroMQé€šä¿¡

æ¨¡ç»„é—´é€šä¿¡ä½¿ç”¨ZeroMQçš„ä¸¤ç§æ¨¡å¼ï¼š

1. **å‘å¸ƒ/è®¢é˜… (PUB/SUB)**: ä¸€å¯¹å¤šå¹¿æ’­
```typescript
// å‘å¸ƒæ¶ˆæ¯
publisher.send(['topic.name', JSON.stringify(message)]);

// è®¢é˜…æ¶ˆæ¯
subscriber.subscribe('topic.name');
subscriber.on('message', (topic, message) => {
  // å¤„ç†æ¶ˆæ¯
});
```

2. **è¯·æ±‚/å“åº” (REQ/REP)**: ä¸€å¯¹ä¸€æœåŠ¡è°ƒç”¨
```typescript
// å‘é€è¯·æ±‚
const response = await requester.send(JSON.stringify(request));

// å¤„ç†è¯·æ±‚
responder.on('message', async (request) => {
  const response = await processRequest(request);
  responder.send(JSON.stringify(response));
});
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### äº¤æ˜“å‘˜æ¨¡ç»„ (Trader)
- ç­–ç•¥åŒ…æ¥æ”¶å’Œç®¡ç†
- é£é™©è¯„ä¼°ç”³è¯·
- èµ„é‡‘ç”³è¯·å’Œå®¡æ‰¹
- TWAP/VWAPæ™ºèƒ½è®¢å•æ‰§è¡Œ
- å®æ—¶æŒä»“ç›‘æ§

### é£æ§æ¨¡ç»„ (Risk Control)
- äº¤æ˜“å‰é£é™©è¯„ä¼° (1-10åˆ†è¯„åˆ†)
- å®æ—¶å¸‚åœºç›‘æ§
- é£é™©è­¦æŠ¥å‘å¸ƒ
- ç†”æ–­æœºåˆ¶è§¦å‘

### è´¢åŠ¡æ¨¡ç»„ (Finance)
- åŠ¨æ€èµ„é‡‘åˆ†é…ç®—æ³•
- é¢„ç®—å®¡æ‰¹æµç¨‹
- è´¦æˆ·å¥åº·æ£€æŸ¥
- ç›ˆäºç»Ÿè®¡åˆ†æ

### æ€»æ§æ¨¡ç»„ (Master Control)
- å…¨å±€çŠ¶æ€ç›‘æ§
- ç³»ç»Ÿæ¨¡å¼åˆ‡æ¢ (ç‰›å¸‚/ç†Šå¸‚/é˜²å¾¡)
- ç´§æ€¥ç†”æ–­æ§åˆ¶
- ç³»ç»Ÿå¥åº·æ£€æŸ¥

## ğŸ”’ å®‰å…¨è§„èŒƒ

### æ•°æ®éš”ç¦»
- ä¸¥ç¦ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
- é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥APIå¯†é’¥
- ä¸åŒç¯å¢ƒä½¿ç”¨ç‹¬ç«‹æ•°æ®åº“
- å ä½æ•°æ®ä»…é™å¼€å‘ç¯å¢ƒ

### è®¿é—®æ§åˆ¶
- åŸºäºè§’è‰²çš„æƒé™ç®¡ç†
- JWTä»¤ç‰Œè®¤è¯
- APIé™æµä¿æŠ¤
- è¯·æ±‚æ—¥å¿—è®°å½•

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—çº§åˆ«
- **development**: DEBUGçº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡º
- **staging**: DEBUGçº§åˆ«ï¼Œæ–‡ä»¶è¾“å‡º
- **production**: INFOçº§åˆ«ï¼Œæ–‡ä»¶+é”™è¯¯æ—¥å¿—åˆ†ç¦»

### ç›‘æ§æŒ‡æ ‡
- ç³»ç»Ÿå¥åº·çŠ¶æ€
- äº¤æ˜“æ‰§è¡Œæ€§èƒ½
- é£é™©æŒ‡æ ‡ç›‘æ§
- èµ„é‡‘ä½¿ç”¨æƒ…å†µ
- ZeroMQæ¶ˆæ¯å»¶è¿Ÿ

### Grafanaä»ªè¡¨æ¿
è®¿é—® http://localhost:3001 æŸ¥çœ‹ç›‘æ§ä»ªè¡¨æ¿
- é»˜è®¤ç”¨æˆ·å: admin
- é»˜è®¤å¯†ç : admin123

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæ¨¡ç»„æµ‹è¯•
npm test -- --grep "trader"

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“ APIæ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—® http://localhost:3000/api/docs æŸ¥çœ‹å®Œæ•´APIæ–‡æ¡£ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·åˆ›å»º [Issue](../../issues) æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚