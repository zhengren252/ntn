# 市场微结构仿真引擎 (MMS) - 环境配置文件
# 复制此文件为 .env 并根据实际环境修改配置

# =============================================================================
# 基础配置
# =============================================================================

# 服务器配置
HOST=0.0.0.0
PORT=50051
ENVIRONMENT=development
DEBUG=true

# =============================================================================
# ZeroMQ 配置
# =============================================================================

# ZeroMQ 端口配置
ZMQ_FRONTEND_PORT=5555
ZMQ_BACKEND_PORT=5556
ZMQ_TIMEOUT=30000

# =============================================================================
# Redis 配置
# =============================================================================

# Redis 连接配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# 数据库配置
# =============================================================================

# SQLite 数据库路径
DATABASE_PATH=./data/mms.db
DATABASE_POOL_SIZE=20
DATABASE_TIMEOUT=30

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别和格式
LOG_LEVEL=INFO
LOG_FORMAT=colored
LOG_DIR=./logs
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5

# =============================================================================
# 安全配置
# =============================================================================

# API 安全配置
API_KEY_REQUIRED=false
API_KEY=your-secret-api-key-here
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# 仿真引擎配置
# =============================================================================

# 仿真参数
SIMULATION_TIMEOUT=300
MAX_SIMULATION_STEPS=100000
DEFAULT_WORKER_COUNT=4
MAX_WORKER_COUNT=16

# =============================================================================
# 数据源配置
# =============================================================================

# 外部数据源
DATA_SOURCE_ENABLED=false
DATA_SOURCE_URL=https://api.example.com/market-data
DATA_SOURCE_API_KEY=your-data-source-api-key
DATA_SOURCE_TIMEOUT=10

# =============================================================================
# 报告配置
# =============================================================================

# 报告生成配置
REPORT_DIR=./reports
REPORT_FORMAT=json
REPORT_RETENTION_DAYS=30
REPORT_MAX_SIZE=50485760

# =============================================================================
# 监控配置
# =============================================================================

# 性能监控
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=60
METRICS_RETENTION_HOURS=24
ALERT_THRESHOLD_CPU=80
ALERT_THRESHOLD_MEMORY=80

# Prometheus 配置（可选）
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# =============================================================================
# 缓存配置
# =============================================================================

# 缓存设置
ENABLE_CACHE=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=300

# =============================================================================
# 开发配置
# =============================================================================

# 开发模式配置
AUTO_RELOAD=true
HOT_RELOAD=true
DEBUG_SQL=false
PROFILING_ENABLED=false

# 测试配置
TEST_DATABASE_PATH=./data/test_mms.db
TEST_REDIS_DB=1

# =============================================================================
# Docker 配置
# =============================================================================

# Docker 环境变量
DOCKER_NETWORK=mms-network
DOCKER_VOLUME_DATA=mms-data
DOCKER_VOLUME_LOGS=mms-logs

# =============================================================================
# 高级配置
# =============================================================================

# 性能调优
UVICORN_WORKERS=1
UVICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
UVICORN_MAX_REQUESTS=1000
UVICORN_MAX_REQUESTS_JITTER=100

# 内存管理
MAX_MEMORY_USAGE=2048
GC_THRESHOLD=100

# 网络配置
KEEP_ALIVE_TIMEOUT=5
CONNECTION_TIMEOUT=60
READ_TIMEOUT=30
WRITE_TIMEOUT=30

# =============================================================================
# 扩展配置
# =============================================================================

# 插件配置
PLUGINS_ENABLED=false
PLUGINS_DIR=./plugins

# 自定义策略
CUSTOM_STRATEGIES_ENABLED=false
CUSTOM_STRATEGIES_DIR=./strategies

# 外部集成
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-url.com/mms
WEBHOOK_SECRET=your-webhook-secret

# =============================================================================
# 注意事项
# =============================================================================
# 1. 生产环境请务必修改默认密码和密钥
# 2. 根据服务器配置调整工作进程数量和内存限制
# 3. 确保防火墙已开放相应端口
# 4. 定期备份数据库和日志文件
# 5. 监控系统资源使用情况